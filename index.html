<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TradeLog â€” Personal Trading Journal</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=DM+Mono:wght@300;400;500&display=swap" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- LOCK -->
<div id="lock">
  <div class="lock-bg-circles"><span></span><span></span></div>
  <div class="lock-card">
    <div class="lock-brand">
      <div class="lock-brand-icon">ğŸ“ˆ</div>
      <div><div class="lock-brand-name">Trade<em>Log</em></div></div>
    </div>
    <div class="lock-tagline">Personal Trading Journal Â· Stocks Â· INR</div>
    <div class="lock-divider"></div>
    <span class="lock-lbl">Password</span>
    <input id="pin" type="password" class="lock-inp" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢" maxlength="30" autocomplete="off">
    <button class="lock-btn" onclick="unlock()">Unlock Journal</button>
    <div class="lock-err" id="lerr">Incorrect password â€” try again</div>
    <div class="lock-hint">Default: <code>trade123</code></div>
  </div>
</div>

<!-- APP -->
<div id="app">
  <nav class="sb">
    <div class="sb-logo">
      <div class="sb-brand">
        <div class="sb-brand-icon">ğŸ“ˆ</div>
        <div><div class="sb-brand-name">Trade<em>Log</em></div></div>
      </div>
      <div class="sb-tagline">Personal Journal Â· INR</div>
    </div>
    <div class="sb-nav">
      <button class="ni on"  onclick="go('dashboard',this)"><div class="ni-icon">âŠ</div> Dashboard</button>
      <button class="ni"     onclick="go('journal',this)"><div class="ni-icon">â—§</div> Journal</button>
      <button class="ni"     onclick="go('dailyjournal',this)"><div class="ni-icon">ğŸ““</div> Daily Journal</button>
      <button class="ni"     onclick="go('playbook',this)"><div class="ni-icon">ğŸ“‹</div> Playbook</button>
      <button class="ni"     onclick="go('reports',this)"><div class="ni-icon">ğŸ“Š</div> Reports</button>
      <button class="ni"     onclick="go('analytics',this)"><div class="ni-icon">â—‰</div> Analytics</button>
      <button class="ni"     onclick="go('calculator',this)"><div class="ni-icon">â—«</div> Calculator</button>
      <button class="ni"     onclick="go('settings',this)"><div class="ni-icon">âŠ™</div> Settings</button>
    </div>
    <div class="sb-bot">
      <button class="add-btn" onclick="openAdd()">+ Add Trade</button>
    </div>
  </nav>

  <div class="main">

    <!-- DASHBOARD -->
    <div class="page on" id="pg-dashboard">
      <div class="topbar">
        <div class="topbar-left">
          <div class="greeting" id="greeting">Good morning!</div>
          <div class="sub" id="ddate">â€”</div>
        </div>
        <div class="topbar-right">
          <div class="live-pill"><div class="dot-live"></div>Live Session</div>
        </div>
      </div>

      <div class="sg">
        <div class="sc"><div class="sc-accent purple"></div><div class="sc-top"><div class="sc-lbl">Total P&amp;L</div><div class="sc-ico ico-purple">ğŸ’°</div></div><div class="sc-val purple" id="s-pnl">â‚¹0</div><div class="sc-sub" id="s-psub">0 trades logged</div></div>
        <div class="sc"><div class="sc-accent green"></div><div class="sc-top"><div class="sc-lbl">Win Rate</div><div class="sc-ico ico-green">ğŸ¯</div></div><div class="sc-val neu" id="s-wr">0%</div><div class="sc-sub" id="s-wsub">0W Â· 0L</div></div>
        <div class="sc"><div class="sc-accent blue"></div><div class="sc-top"><div class="sc-lbl">Profit Factor</div><div class="sc-ico ico-blue">âš¡</div></div><div class="sc-val neu" id="s-pf">0.00</div><div class="sc-sub">Gross profit / gross loss</div></div>
        <div class="sc"><div class="sc-accent amber"></div><div class="sc-top"><div class="sc-lbl">Avg Risk:Reward</div><div class="sc-ico ico-amber">ğŸ“</div></div><div class="sc-val neu" id="s-rr">â€”</div><div class="sc-sub">Average across all trades</div></div>
      </div>

      <!-- SCORE + CHARTS ROW -->
      <div class="dash-row3">
        <!-- TradeLog Score radar -->
        <div class="cc">
          <div class="cc-head"><div><div class="cc-lbl">TradeLog Score</div><div class="cc-sub">Process Â· Win Rate Â· Profit Factor</div></div><div class="tls-badge" id="tls-badge">â€”</div></div>
          <canvas id="radar-c" height="170"></canvas>
          <div class="tls-sub" id="tls-sub">Log trades to see your score</div>
        </div>
        <!-- Equity Curve -->
        <div class="cc">
          <div class="cc-head"><div><div class="cc-lbl">Equity Curve</div><div class="cc-sub">Cumulative P&amp;L over time</div></div><div class="cc-big" id="eq-big" style="color:var(--green)">â‚¹0</div></div>
          <canvas id="eq-c" height="150"></canvas>
        </div>
        <!-- Win/Loss -->
        <div class="cc">
          <div class="cc-head"><div><div class="cc-lbl">Win / Loss Split</div><div class="cc-sub">Outcome breakdown</div></div></div>
          <canvas id="wl-c" height="150"></canvas>
        </div>
      </div>

      <div class="br">
        <div class="bp"><div class="bp-head">Streak Tracker</div><div class="str-row"><div class="str-box"><div class="str-n g" id="st-w">0</div><div class="str-l">Best Win</div></div><div class="str-box"><div class="str-n r" id="st-l">0</div><div class="str-l">Worst Loss</div></div><div class="str-box"><div class="str-n n" id="st-c">0</div><div class="str-l">Current</div></div></div></div>
        <div class="bp"><div class="bp-head">Best &amp; Worst Trades</div><div id="bwlist"><div class="bw"><div class="bw-sym" style="color:var(--text3);font-size:13px">No trades yet</div></div></div></div>
      </div>

      <!-- RECENT TRADES MINI TABLE -->
      <div class="bp" style="margin-bottom:16px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:14px;">
          <div class="bp-head" style="margin:0">Recent Trades</div>
          <button class="link-btn" onclick="go('journal',document.querySelector('.ni:nth-child(2)'))">View All â†’</button>
        </div>
        <div class="recent-tbl">
          <div class="recent-hdr"><span>Symbol</span><span>Date</span><span>Setup</span><span>P&amp;L</span><span>Quality</span></div>
          <div id="recent-body"><div class="otrade-empty">No trades yet</div></div>
        </div>
      </div>

      <!-- INSIGHT PANELS -->
      <div class="dash-insights">
        <div class="ins-panel">
          <div class="ins-head"><div class="ins-label">Emotion vs P&amp;L</div><span class="ins-tag neutral" id="emo-best-tag">â€”</span></div>
          <div id="emo-pnl-rows"><div class="otrade-empty">No emotions logged yet. Add emotional state when logging trades.</div></div>
        </div>
        <div class="ins-panel">
          <div class="ins-head"><div class="ins-label">Good vs Bad Trade P&amp;L Split</div><span class="ins-tag neutral" id="split-tag">Rules Cost</span></div>
          <div class="split-row">
            <div class="split-box good-side"><div class="split-box-lbl">âœ“ Good Trades (â‰¥3/4)</div><div class="split-box-val" id="split-good-pnl">â‚¹0</div><div class="split-box-sub" id="split-good-sub">0 trades</div></div>
            <div class="split-box bad-side"><div class="split-box-lbl">âœ— Bad Trades (&lt;3/4)</div><div class="split-box-val" id="split-bad-pnl">â‚¹0</div><div class="split-box-sub" id="split-bad-sub">0 trades</div></div>
          </div>
          <div class="cost-banner" id="split-banner">Score your trades to see how much rule violations are costing you.</div>
        </div>
      </div>
    </div>

    <!-- JOURNAL -->
    <div class="page" id="pg-journal">
      <div class="topbar">
        <div class="topbar-left"><h1>Journal <span class="cbadge" id="tcnt">0</span></h1><div class="sub">All trades Â· Stocks Â· INR</div></div>
        <div class="topbar-right"><button class="pdf-btn" onclick="exportPDF()">â¬‡ Export PDF</button></div>
      </div>
      <div class="jctrl">
        <input class="ci" id="fs" type="text" placeholder="Search symbol..." oninput="rj()" style="width:148px">
        <select class="ci" id="fr" onchange="rj()"><option value="">All Results</option><option value="win">Wins</option><option value="loss">Losses</option></select>
        <select class="ci" id="fst" onchange="rj()"><option value="">All Setups</option><option>Breakout</option><option>Reversal</option><option>Trend Follow</option><option>Support/Resistance</option><option>Gap Fill</option><option>Other</option></select>
        <select class="ci" id="fso" onchange="rj()"><option value="dd">Newest First</option><option value="da">Oldest First</option><option value="pd">Highest P&L</option><option value="pa">Lowest P&L</option></select>
      </div>
      <div class="ttw">
        <div class="tth"><div class="th">Date</div><div class="th">Symbol</div><div class="th">Setup</div><div class="th">Entry</div><div class="th">Exit</div><div class="th">Qty</div><div class="th">P&amp;L</div><div class="th">Quality</div><div class="th"></div></div>
        <div class="ttb" id="tbody"></div>
      </div>
    </div>

    <!-- DAILY JOURNAL -->
    <div class="page" id="pg-dailyjournal">
      <div class="topbar">
        <div class="topbar-left"><h1>Daily Journal</h1><div class="sub">Write notes for each trading day</div></div>
        <div class="topbar-right"><button class="spb" onclick="saveDayNote()">Save Note</button></div>
      </div>
      <div class="dj-layout">
        <div class="dj-left">
          <div class="dj-date-row">
            <button class="hm-nav-btn" onclick="djPrev()">â† Prev</button>
            <input type="date" id="dj-date" class="dj-date-input" onchange="loadDayNote()">
            <button class="hm-nav-btn" onclick="djNext()">Next â†’</button>
          </div>
          <div class="dj-stat-row" id="dj-stats"></div>
          <div class="dj-trades-list" id="dj-trades"></div>
        </div>
        <div class="dj-right">
          <div class="dj-editor-label">Notes for <span id="dj-label-date">today</span></div>
          <div class="dj-mood-row">
            <span style="font-size:12px;font-weight:600;color:var(--text2);">Day mood:</span>
            <button class="eb" onclick="djMood(this,'ğŸ”¥ Fired Up')">ğŸ”¥ Fired Up</button>
            <button class="eb" onclick="djMood(this,'ğŸ˜ Focused')">ğŸ˜ Focused</button>
            <button class="eb" onclick="djMood(this,'ğŸ˜ Neutral')">ğŸ˜ Neutral</button>
            <button class="eb" onclick="djMood(this,'ğŸ˜° Anxious')">ğŸ˜° Anxious</button>
            <button class="eb" onclick="djMood(this,'ğŸ˜¡ Frustrated')">ğŸ˜¡ Frustrated</button>
            <input type="hidden" id="dj-mood">
          </div>
          <textarea class="dj-textarea" id="dj-note" placeholder="What happened today? Market observations, decisions, lessons, mindset..."></textarea>
          <div class="dj-past-notes" id="dj-past"></div>
        </div>
      </div>
    </div>

    <!-- PLAYBOOK -->
    <div class="page" id="pg-playbook">
      <div class="topbar">
        <div class="topbar-left"><h1>Playbook</h1><div class="sub">Your documented setups &amp; rules</div></div>
        <div class="topbar-right"><button class="spb" onclick="openPlaybookModal()">+ New Setup</button></div>
      </div>
      <div class="pb-grid" id="pb-grid">
        <div class="pb-empty"><div class="empty-i">ğŸ“‹</div><div class="empty-t">No setups documented yet.<br>Add your first setup to build your playbook.</div></div>
      </div>
    </div>

    <!-- REPORTS -->
    <div class="page" id="pg-reports">
      <div class="topbar">
        <div class="topbar-left"><h1>Reports</h1><div class="sub">Filtered performance stats</div></div>
      </div>
      <div class="rpt-filter">
        <div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap">
          <span style="font-size:12px;font-weight:600;color:var(--text2)">Date range:</span>
          <input type="date" id="rpt-from" class="ci">
          <span style="color:var(--text3);font-size:13px">to</span>
          <input type="date" id="rpt-to" class="ci">
          <select class="ci" id="rpt-setup"><option value="">All Setups</option><option>Breakout</option><option>Reversal</option><option>Trend Follow</option><option>Support/Resistance</option><option>Gap Fill</option><option>Other</option></select>
          <button class="spb" onclick="renderReports()" style="padding:8px 18px;font-size:13px">Run Report</button>
          <button class="bcn" onclick="clearRptFilter()" style="padding:8px 14px;font-size:13px">Clear</button>
        </div>
      </div>
      <div class="rpt-stat-grid" id="rpt-stats"></div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px">
        <div class="bp"><div class="bp-head">P&amp;L by Day of Week</div><canvas id="rpt-dow-c" height="160"></canvas></div>
        <div class="bp"><div class="bp-head">Daily P&amp;L Bars</div><canvas id="rpt-daily-c" height="160"></canvas></div>
      </div>
      <div class="bp" style="margin-bottom:16px">
        <div class="bp-head">Trades in Range</div>
        <div class="ttw" style="border:none;margin-top:0">
          <div class="tth"><div class="th">Date</div><div class="th">Symbol</div><div class="th">Setup</div><div class="th">Entry</div><div class="th">Exit</div><div class="th">P&amp;L</div><div class="th">Quality</div></div>
          <div class="ttb" id="rpt-tbody" style="max-height:320px"></div>
        </div>
      </div>
    </div>

    <!-- ANALYTICS -->
    <div class="page" id="pg-analytics">
      <div class="topbar"><div class="topbar-left"><h1>Analytics</h1><div class="sub">Heatmap Â· Setup performance Â· Monthly Â· Discipline</div></div></div>
      <div class="an-card full" style="margin-bottom:16px">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;">
          <div class="an-title" style="margin-bottom:0">Monthly P&amp;L Heatmap</div>
          <div class="hm-legend">
            <div class="hm-leg-item"><div class="hm-leg-dot" style="background:rgba(18,183,106,.5)"></div>Big Win</div>
            <div class="hm-leg-item"><div class="hm-leg-dot" style="background:rgba(18,183,106,.15)"></div>Win</div>
            <div class="hm-leg-item"><div class="hm-leg-dot" style="background:var(--bg2);border:1px solid var(--border)"></div>No Trade</div>
            <div class="hm-leg-item"><div class="hm-leg-dot" style="background:rgba(240,68,56,.15)"></div>Loss</div>
            <div class="hm-leg-item"><div class="hm-leg-dot" style="background:rgba(240,68,56,.4)"></div>Big Loss</div>
          </div>
        </div>
        <div class="hm-nav"><button class="hm-nav-btn" onclick="hmPrev()">â† Prev</button><div class="hm-month-label" id="hm-label">â€”</div><button class="hm-nav-btn" onclick="hmNext()">Next â†’</button></div>
        <div class="hm-dow"><div class="hm-dow-lbl">Sun</div><div class="hm-dow-lbl">Mon</div><div class="hm-dow-lbl">Tue</div><div class="hm-dow-lbl">Wed</div><div class="hm-dow-lbl">Thu</div><div class="hm-dow-lbl">Fri</div><div class="hm-dow-lbl">Sat</div></div>
        <div class="hm-cal" id="hm-cal"></div>
      </div>
      <div class="an-grid">
        <div class="an-card full"><div class="an-title">Discipline Score â€” Process Over P&amp;L</div><div class="psych-wrap"><div class="psych-grid"><div class="psych-card"><div class="psych-num n" id="ps-avg">â€”</div><div class="psych-lbl">Avg Quality Score</div></div><div class="psych-card"><div class="psych-num g" id="ps-good">0</div><div class="psych-lbl">Good Trades (â‰¥3/4)</div></div><div class="psych-card"><div class="psych-num r" id="ps-bad">0</div><div class="psych-lbl">Bad Trades (&lt;3/4)</div></div><div class="psych-card"><div class="psych-num gold" id="ps-pct">0%</div><div class="psych-lbl">Process Adherence</div></div></div><div class="insight-box" id="psych-insights">Log trades with quality scores to see your psychology insights.</div></div></div>
        <div class="an-card"><div class="an-title">P&amp;L by Setup Type</div><div id="setup-bars"><div class="empty"><div class="empty-i">â—«</div><div class="empty-t">No trades yet</div></div></div></div>
        <div class="an-card"><div class="an-title">Monthly Breakdown</div><div style="overflow-x:auto"><table class="month-table"><thead><tr><th>Month</th><th>Trades</th><th>Wins</th><th>P&amp;L</th><th>Win%</th></tr></thead><tbody id="month-body"><tr><td colspan="5" style="color:var(--text3);padding:20px 12px;font-size:12px">No data yet</td></tr></tbody></table></div></div>
        <div class="an-card full"><div class="an-title">Setup P&amp;L Distribution</div><canvas id="setup-chart" height="90"></canvas></div>
      </div>
    </div>

    <!-- CALCULATOR -->
    <div class="page" id="pg-calculator">
      <div class="topbar"><div class="topbar-left"><h1>Calculator</h1><div class="sub">Position sizing Â· Risk management</div></div></div>
      <div class="cg">
        <div class="cp"><div class="ct">Risk % Sizing</div><div class="cs">Never risk more than you plan</div>
          <div class="cf"><label>Account Capital (â‚¹)</label><input id="c1c" type="number" placeholder="500000" value="500000"></div>
          <div class="cf"><label>Risk % Per Trade</label><input id="c1r" type="number" placeholder="1.0" value="1" step="0.1"></div>
          <div class="cf"><label>Entry Price (â‚¹)</label><input id="c1e" type="number" placeholder="1500"></div>
          <div class="cf"><label>Stop Loss Price (â‚¹)</label><input id="c1s" type="number" placeholder="1450"></div>
          <button class="crun" onclick="cr1()">Calculate Quantity</button>
          <div class="cres" id="res1"><div class="crl">Shares to Buy</div><div class="crv" id="r1v">â€”</div><div class="crs" id="r1s">â€”</div></div>
        </div>
        <div class="cp"><div class="ct">Fixed Lot R:R</div><div class="cs">Know your risk before entry</div>
          <div class="cf"><label>Entry Price (â‚¹)</label><input id="c2e" type="number" placeholder="1500"></div>
          <div class="cf"><label>Stop Loss Price (â‚¹)</label><input id="c2s" type="number" placeholder="1450"></div>
          <div class="cf"><label>Target Price (â‚¹)</label><input id="c2t" type="number" placeholder="1600"></div>
          <div class="cf"><label>Quantity (Shares)</label><input id="c2q" type="number" placeholder="100"></div>
          <button class="crun" onclick="cr2()">Calculate R:R</button>
          <div class="cres" id="res2"><div class="crl">Risk : Reward</div><div class="crv" id="r2v">â€”</div><div class="crs" id="r2s">â€”</div></div>
        </div>
      </div>
    </div>

    <!-- SETTINGS -->
    <div class="page" id="pg-settings">
      <div class="topbar"><div class="topbar-left"><h1>Settings</h1><div class="sub">Configuration Â· Sync Â· Security</div></div></div>
      <div class="ibnr">â—ˆ &nbsp;<strong>GitHub Gist Storage</strong> â€” Sync trades to a private Gist. Create one at <code>gist.github.com</code>, copy the ID from the URL. Generate a token at <code>github.com/settings/tokens</code> with <code>gist</code> scope.</div>
      <div class="spg">
        <div class="sp"><div class="spt">Gist Sync</div><div class="sps">Connect GitHub to sync across devices. Token stored locally only.</div>
          <div class="spf"><label>Personal Access Token</label><input type="password" id="stok" placeholder="ghp_xxxxxxxxxx"></div>
          <div class="spf"><label>Gist ID</label><input type="text" id="sgid" placeholder="abc123def456..."></div>
          <button class="spb" onclick="saveGist()">Save &amp; Connect</button>
          <div class="gst"><div class="gdot" id="gdot"></div><span id="gtxt">Not connected</span></div>
        </div>
        <div class="sp"><div class="spt">Security</div><div class="sps">Change your journal unlock password.</div>
          <div class="spf"><label>New Password</label><input type="password" id="snp"></div>
          <div class="spf"><label>Confirm Password</label><input type="password" id="scp"></div>
          <button class="spb" onclick="chgPass()">Update Password</button>
        </div>
        <div class="sp full"><div class="spt">Data Management</div><div class="sps">Export or wipe all local data.</div>
          <div style="display:flex;gap:10px;flex-wrap:wrap">
            <button class="spb" onclick="expJSON()">Export JSON</button>
            <button class="spb" onclick="exportPDF()">Export PDF Report</button>
            <button class="spb dng" onclick="clr()">Clear All Data</button>
          </div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- TRADE MODAL -->
<div class="ov" id="tm">
  <div class="modal">
    <div class="mh"><div class="mt" id="mtitle">New Trade</div><button class="mc" onclick="closeM('tm')">âœ•</button></div>
    <input type="hidden" id="eid">
    <div class="fg2">
      <div class="fg"><label>Symbol</label><input id="f-sym" type="text" placeholder="RELIANCE, TCS..." style="text-transform:uppercase"></div>
      <div class="fg"><label>Trade Date</label><input id="f-date" type="date"></div>
      <div class="fg"><label>Entry Price (â‚¹)</label><input id="f-en" type="number" placeholder="0.00" step="0.01"></div>
      <div class="fg"><label>Exit Price (â‚¹)</label><input id="f-ex" type="number" placeholder="0.00" step="0.01"></div>
      <div class="fg"><label>Quantity (Shares)</label><input id="f-qty" type="number" placeholder="0"></div>
      <div class="fg"><label>P&amp;L â‚¹ (blank = auto)</label><input id="f-pnl" type="number" placeholder="Auto-calculated" step="0.01"></div>
      <div class="fg"><label>Setup Type</label><select id="f-setup"><option value="">Select setup...</option><option>Breakout</option><option>Reversal</option><option>Trend Follow</option><option>Support/Resistance</option><option>Gap Fill</option><option>Other</option></select></div>
      <div class="fg"><label>Risk : Reward</label><input id="f-rr" type="text" placeholder="e.g. 1:2.5"></div>
      <div class="fg full"><label>Emotional State</label>
        <div class="emo-g">
          <button type="button" class="eb" onclick="emo(this,'Confident')">ğŸ˜Š Confident</button>
          <button type="button" class="eb" onclick="emo(this,'Disciplined')">ğŸ¯ Disciplined</button>
          <button type="button" class="eb" onclick="emo(this,'Nervous')">ğŸ˜° Nervous</button>
          <button type="button" class="eb" onclick="emo(this,'FOMO')">ğŸ˜¤ FOMO</button>
          <button type="button" class="eb" onclick="emo(this,'Revenge')">ğŸ˜¡ Revenge</button>
          <button type="button" class="eb" onclick="emo(this,'Neutral')">ğŸ˜ Neutral</button>
        </div>
        <input type="hidden" id="f-emo">
      </div>
      <div class="fg full"><label>Strategy Notes</label><textarea id="f-str" placeholder="Describe your trade setup, reasoning, and execution..."></textarea></div>
      <div class="fg full"><label>Lessons Learned</label><textarea id="f-les" placeholder="What did this trade teach you?"></textarea></div>
      <div class="fg full"><label>Chart Screenshot</label>
        <div class="iz"><input type="file" accept="image/*" onchange="imgUp(event)"><div class="iz-t">ğŸ“· Click or drag to upload chart image</div><img id="iprev" class="ip"></div>
        <input type="hidden" id="f-chart">
      </div>
      <div class="quality-section">
        <div class="quality-header">
          <div><div class="quality-title">Trade Quality Score â€” Did I follow my process?</div><div style="font-size:11px;color:var(--text3);margin-top:3px;">A good trade follows the process. A bad trade breaks it â€” even if it profits.</div></div>
          <div class="quality-score-preview" id="qs-preview">â€”/4</div>
        </div>
        <div class="quality-checks">
          <div class="qcheck" id="qc-setup" onclick="toggleQ('setup')"><div class="qcheck-box" id="qcb-setup">âœ“</div><div><div class="qcheck-label">Followed My Setup</div><div class="qcheck-sub">Entry matched my predefined setup rules &amp; criteria</div></div></div>
          <div class="qcheck" id="qc-sizing" onclick="toggleQ('sizing')"><div class="qcheck-box" id="qcb-sizing">âœ“</div><div><div class="qcheck-label">Followed Position Sizing</div><div class="qcheck-sub">Risked only my planned % â€” no oversizing or revenge sizing</div></div></div>
          <div class="qcheck" id="qc-sl" onclick="toggleQ('sl')"><div class="qcheck-box" id="qcb-sl">âœ“</div><div><div class="qcheck-label">Respected Stop-Loss</div><div class="qcheck-sub">Did not move, widen, or ignore the stop-loss</div></div></div>
          <div class="qcheck" id="qc-structure" onclick="toggleQ('structure')"><div class="qcheck-box" id="qcb-structure">âœ“</div><div><div class="qcheck-label">A+ Structure Only</div><div class="qcheck-sub">Only took the trade because the structure was high quality</div></div></div>
        </div>
      </div>
      <input type="hidden" id="f-q-setup" value="0">
      <input type="hidden" id="f-q-sizing" value="0">
      <input type="hidden" id="f-q-sl" value="0">
      <input type="hidden" id="f-q-structure" value="0">
    </div>
    <div class="fa"><button class="bcn" onclick="closeM('tm')">Cancel</button><button class="bsv" onclick="saveTr()">Save Trade</button></div>
  </div>
</div>

<!-- DETAIL MODAL -->
<div class="ov" id="dm">
  <div class="modal" style="max-width:760px">
    <div class="mh"><div class="mt" id="dtitle">Trade Detail</div><button class="mc" onclick="closeM('dm')">âœ•</button></div>
    <div id="dbody"></div>
  </div>
</div>

<!-- PLAYBOOK MODAL -->
<div class="ov" id="pbm">
  <div class="modal" style="max-width:680px">
    <div class="mh"><div class="mt" id="pb-modal-title">New Setup</div><button class="mc" onclick="closeM('pbm')">âœ•</button></div>
    <input type="hidden" id="pb-eid">
    <div class="fg2">
      <div class="fg"><label>Setup Name</label><input id="pb-name" type="text" placeholder="e.g. Opening Range Breakout"></div>
      <div class="fg"><label>Market Condition</label><select id="pb-market"><option value="">Select...</option><option>Trending Up</option><option>Trending Down</option><option>Sideways</option><option>High Volatility</option><option>Any</option></select></div>
      <div class="fg full"><label>Entry Rules</label><textarea id="pb-entry" placeholder="What conditions must be true BEFORE you enter?"></textarea></div>
      <div class="fg full"><label>Exit Rules</label><textarea id="pb-exit" placeholder="When do you take profit? Where is your stop?"></textarea></div>
      <div class="fg full"><label>Indicators / Confluence</label><textarea id="pb-ind" placeholder="Which indicators or price action signals confirm this setup?"></textarea></div>
      <div class="fg full"><label>Notes &amp; Reminders</label><textarea id="pb-notes" placeholder="Mistakes to avoid, psychology notes, best time of day..."></textarea></div>
      <div class="fg full"><label>Example Chart Image</label>
        <div class="iz"><input type="file" accept="image/*" onchange="pbImgUp(event)"><div class="iz-t">ğŸ“· Upload an example chart for this setup</div><img id="pb-iprev" class="ip"></div>
        <input type="hidden" id="pb-chart">
      </div>
    </div>
    <div class="fa"><button class="bcn" onclick="closeM('pbm')">Cancel</button><button class="bsv" onclick="savePlaybook()">Save Setup</button></div>
  </div>
</div>

<div class="toast" id="toast"></div>
<script src="script.js"></script>
</body>
</html>
